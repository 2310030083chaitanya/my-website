<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login | Student Performance Prediction</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#4f46e5;
  --bg:#f8fafc;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
}

body{
  font-family:'Inter',sans-serif;
  background:var(--bg);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--text);
}

/* WRAPPER */
.auth-wrapper{
  width:100%;
  max-width:1000px;
  background:var(--card);
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 25px 50px rgba(0,0,0,.1);
  display:flex;
}

/* LEFT INFO */
.auth-info{
  flex:1;
  background:#eef2ff;
  padding:50px;
  display:flex;
  flex-direction:column;
  justify-content:center;
}
.auth-info h2{
  font-weight:700;
}
.auth-info p{
  color:var(--muted);
}
.auth-info ul{
  padding-left:18px;
  color:var(--muted);
}
.auth-info img{
  max-width:100%;
  margin-top:30px;
}

/* RIGHT FORM */
.auth-form{
  flex:1;
  padding:50px;
}
.auth-form h3{
  font-weight:700;
}
.small-text{
  color:var(--muted);
  font-size:14px;
}

/* INPUTS */
.form-control,.form-select{
  border-radius:10px;
}
.form-control:focus,.form-select:focus{
  box-shadow:0 0 0 3px rgba(79,70,229,.15);
  border-color:var(--primary);
}

/* BUTTON */
.btn-login{
  background:var(--primary);
  color:white;
  border-radius:10px;
  padding:12px;
  font-weight:600;
}
.btn-login:hover{
  background:#4338ca;
}

/* TRUST */
.trust{
  display:flex;
  gap:15px;
  font-size:14px;
  color:var(--muted);
}

/* MOBILE */
@media(max-width:768px){
  .auth-wrapper{
    flex-direction:column;
  }
  .auth-info{
    display:none;
  }
}
</style>
</head>

<body>

<div class="auth-wrapper">

  <div class="auth-info">
    <h2>Student Performance Prediction</h2>
    <p>
      An AI-driven academic analytics platform designed
      to help institutions improve student outcomes.
    </p>

    <ul>
      <li>Early performance prediction</li>
      <li>Role-based access (Student & Admin)</li>
      <li>Secure academic data handling</li>
    </ul>

    <img src="https://img.freepik.com/free-vector/education-analytics-concept-illustration_114360-7120.jpg"
         alt="Education analytics">
  </div>

  <div class="auth-form">
    <h3>Sign in to your account</h3>
    <p class="small-text mb-4">
      Enter your credentials to access the platform
    </p>

    <form id="loginForm">

      <div class="mb-3">
        <label class="form-label">Role</label>
        <select class="form-select" id="userRole" name="role" required>
          <option value="" disabled selected>Select role</option>
          <option value="Student">Student</option>
          <option value="Admin">Admin</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Email address</label>
        <input type="email" class="form-control" placeholder="name@college.edu" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Password</label>
        <div class="position-relative">
          <input type="password" id="password" class="form-control" required>
          <i class="bi bi-eye position-absolute top-50 end-0 translate-middle-y me-3"
             onclick="togglePassword()" style="cursor:pointer;color:#64748b"></i>
        </div>
      </div>

      <div class="d-flex justify-content-between mb-4 small-text">
        <label><input type="checkbox"> Remember me</label>
        <a href="#" class="text-decoration-none">Forgot password?</a>
      </div>

      <button type="submit" class="btn btn-login w-100 mb-3">Sign In</button>
    </form>

    <div class="trust mt-4">
      <span>ðŸ”’ Secure Login</span>
      <span>ðŸ“Š Academic Data</span>
      <span>ðŸŽ“ Institution Use</span>
    </div>
  </div>

</div>

<script>
// Toggle Password Visibility
function togglePassword(){
  const pwd = document.getElementById("password");
  pwd.type = pwd.type === "password" ? "text" : "password";
}

// Handle Conditional Redirect
document.getElementById('loginForm').addEventListener('submit', function(event) {
  event.preventDefault(); 
  
  const role = document.getElementById('userRole').value;

  if (role === "Student") {
    // Correct: Points to the route /dashbord
    window.location.href = "{{ url_for('dashboard') }}"; 
  } else if (role === "Admin") {
    // Correct: Points to the route /admin
    window.location.href = "{{ url_for('admin') }}";
  }
});
</script>

</body>
</html>